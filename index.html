<!doctype html>
<html lang="ja" class="has-splash">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/style.css">

  <!-- すぐスクロールを止めて初期ガタつき防止 -->
  <script>document.documentElement.classList.add('no-scroll');</script>
  <script>document.documentElement.classList.add('no-scroll');</script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500&family=Zen+Maru+Gothic:wght@500;700&display=swap" rel="stylesheet">

  <!-- ▼ triad（circle.webp）の最終版CSS：重複を排除 -->
  <style>
    /* ヒーロー見出し（既存） */
    .hero__title{font:700 clamp(22px,4vw,34px)/1.35 "Zen Maru Gothic","Noto Sans JP",sans-serif}
    .hero__title .em1{color:#4338ca}
    .hero__title .em2{color:#efc94a}
    .hero__figure{max-width:100%;height:auto;object-fit:contain}

    /* ===== 三つの視点（circle.webp＋説明）決定版 ===== */
    .triad-visual{ padding: clamp(24px, 5vw, 56px) 0; }

    .triad-visual__inner{
      max-width: min(1100px, 92vw);
      margin: 0 auto;
      padding: 0 clamp(12px, 2vw, 24px);
      box-sizing: border-box;
      display: grid;
      grid-template-columns: minmax(280px, 520px) 1fr;
      /* 最小, 推奨, 最大の順に修正 */
      gap: clamp(40px, 3vw, 100px);
      align-items: center;
    }

    /* 画像側 */
    .triad-visual__figure{ margin: 0; }
    .triad-visual__img{
      display: block;
      width: 100%;
      height: auto;
    }

    /* テキスト側 */
    .triad-copy{
      max-width: 56ch;
      margin-inline: auto 0;   /* PC時は左寄せ */
      text-align: left;
    }
    .triad-copy::before{ display: none; }
    .triad-copy__kicker{
      font-size: .88rem;
      letter-spacing: .08em;
      opacity: .7;
      margin: 0 0 .6rem 0;
    }
    .triad-copy__lead{
      font-size: clamp(18px, 2.2vw, 22px);
      line-height: 1.9;
      margin: 0;
      text-wrap: balance;
      text-wrap: pretty;
      line-break: strict;
      hanging-punctuation: allow-end;
      word-break: keep-all;
    }

    /* スマホ最適化：1カラム＋画像を物理的に中央寄せ */
    @media (max-width: 900px){
      .triad-visual__inner{
        grid-template-columns: 1fr;
        justify-items: center;         /* 画像・テキストを中央へ */
      }
      .triad-visual__figure{
        width: min(520px, 92vw);       /* 画像枠を画面幅に合わせて中央配置 */
        margin: 0 auto;
        justify-self: center;
      }
      .triad-visual__img{
        width: 100%;
        height: auto;
      }
      .triad-copy{
        margin-inline: 0;              /* 下段テキストの左右余白をリセット */
      }
    }

    /* 任意：もう少しだけ余白を広げたいとき
    .cta-slab{ margin-bottom: clamp(24px, 5vw, 56px); }
    */

/* ▼ スマホ時：画像を小さめに */
@media (max-width: 900px){
  .triad-visual__figure{
    /* 以前の: width: min(520px, 92vw); を置き換え */
    width: clamp(260px, 82vw, 460px);
    /*      最小 , 推奨 , 最大  */
  }
  .triad-visual__img{
    width: 100%;
    height: auto;
  }
}

@media (max-width: 480px){
  .triad-visual__figure{ width: clamp(240px, 78vw, 420px); }
}

/* ===== 画像の右はみ出し修正：vwをやめて容器基準に ===== */
html, body { margin: 0; overflow-x: hidden; }  /* 念のための横はみ出し抑止 */

.triad-visual{ overflow-x: clip; }             /* 一部ブラウザでは hidden でもOK */

@media (max-width: 900px){
  .triad-visual__inner{
    max-width: 100%;                           /* ← 画面幅に合わせる */
    padding-inline: clamp(12px, 5vw, 24px);    /* 左右対称の内側余白 */
    grid-template-columns: 1fr;
    justify-items: center;
  }

  /* ★ここが核心：figureの幅は“親の内側幅”基準にする */
  .triad-visual__figure{
    width: min(520px, 100%) !important;        /* ← 以前の 82vw / 92vw を上書き */
    margin-inline: auto;
    justify-self: center;
  }

  .triad-visual__img{
    display: block;
    width: 100%;
    height: auto;
    margin: 0 auto;
  }

  .triad-copy{
    margin-inline: 0;
    text-align: left;
  }
}

/* さらに極小幅の微調整（任意） */
@media (max-width: 480px){
  .triad-visual__figure{ width: min(420px, 100%) !important; }
}

/* ===== 三つの視点：画像の右はみ出し＆巨大化の最終修正 ===== */

/* 念のため横はみ出しを全体で抑止 */
html, body, #page { margin: 0; overflow-x: hidden; }

/* 1) 内側コンテナは常に画面幅100%（padding込みで収まる） */
.triad-visual__inner{
  width: min(1100px, 100%) !important;  /* ← max-width:92vw を無効化 */
  max-width: none !important;
  margin: 0 auto;
  padding: 0 clamp(12px, 5vw, 24px);
  box-sizing: border-box;
}

/* 2) 画像ラッパーは“親の内側幅”基準。vwは使わない */
.triad-visual__figure{
  width: 100% !important;
  max-width: 520px;          /* PC上限 */
  margin-inline: auto;       /* 物理的に中央 */
}
.triad-visual__img{
  display: block;
  width: 100%;
  height: auto;
  margin: 0 auto;
}

/* 3) スマホ：1カラム＋画像をひと回り小さく */
@media (max-width: 900px){
  .triad-visual__inner{
    grid-template-columns: 1fr !important;
    place-items: center;
    text-align: initial;  /* テキストは従来どおり */
  }
  .triad-visual__figure{
    max-width: 420px !important;   /* ← ここでサイズ感を決める */
  }
}
/* 極小端末の微調整（任意） */
@media (max-width: 480px){
  .triad-visual__figure{ max-width: 360px !important; }
}

/* === triad（スマホ右ズレ修正・確定版）=== */

/* 念のための土台：横はみ出しを全体で封じる */
html, body { margin:0; overflow-x:hidden; }

/* 1) 内側コンテナは “幅＝100%（内側余白込み）” に固定 */
.triad-visual__inner{
  width: min(1100px, 100%) !important; /* ← vw禁止 */
  max-width:none !important;
  margin:0 auto;
  padding-inline: clamp(12px, 5vw, 24px);
  box-sizing: border-box;              /* paddingを幅に含める */
  display:grid;
  grid-template-columns: minmax(280px, 520px) 1fr;
  gap: clamp(40px, 3vw, 100px);
  align-items:center;
}

/* 2) 画像ラッパーは親基準で中央寄せ、vwを使わない */
.triad-visual__figure{
  width:100% !important;
  max-width:520px;                     /* PC上限 */
  margin-inline:auto;                  /* 物理的センター */
}
.triad-visual__img{
  display:block;
  width:100%;
  height:auto;
}

/* 3) スマホは必ず1カラム＋画像ひと回り小さく */
@media (max-width: 900px){
  .triad-visual__inner{
    grid-template-columns:1fr !important;
    place-items:center;
  }
  .triad-visual__figure{
    max-width:420px !important;        /* スマホ時の上限 */
  }
}
@media (max-width: 480px){
  .triad-visual__figure{ max-width:360px !important; }
}

/* オーバーフロー保険（古い端末向け） */
.triad-visual{ overflow-x: clip; }     /* 一部ブラウザは hidden でもOK */


/* 日本語の改行抑止を解除＋はみ出し防止 */
.triad-copy__lead{
  word-break: normal !important;      /* ← keep-all をやめる */
  overflow-wrap: anywhere !important; /* 句読点なしの長い文字列でも折り返す */
  white-space: normal !important;     /* 念のため */
}

/* テキスト側コンテナも100%以内に収める */
.triad-copy{
  max-width: min(56ch, 100%) !important;
  margin-inline: 0 auto;  /* PCは左寄せ、スマホは後述で中央 */
}

/* スマホ時は中央寄せ＆左右余白を内側に */
@media (max-width: 900px){
  .triad-copy{
    margin-inline: auto !important;
    padding-inline: clamp(12px, 5vw, 24px) !important;
  }
}

/* 念のための土台：幅計算のブレ消し＆横スクロール封じ */
*, *::before, *::after { box-sizing: border-box; }
html, body { margin: 0; overflow-x: hidden; }

/* ハンバーガーメニュー：閉じている間は “存在するけど幅ゼロ扱い” に */
.c-hamburger-menu {
  position: relative;
  z-index: 1000;
}

/* メニュー本体を画面固定・右からスライドイン */
.c-hamburger-menu__list{
  position: fixed;
  top: 0;
  right: 0;
  height: 100dvh;                /* アドレスバー伸縮に強い */
  width: min(100%, 340px);       /* 端末幅を超えない */
  margin: 0;
  padding: 16px 20px;
  box-sizing: border-box;

  overflow-y: auto;
  background: #fff;

  /* ここが重要：画面外に “変形で” 退避（レイアウト幅に加算されない） */
  transform: translateX(100%);
  transition: transform .25s ease;
  will-change: transform;
}

/* チェック時にだけ出す */
.c-hamburger-menu__input:checked ~ .c-hamburger-menu__list{
  transform: translateX(0);
}

/* 背景の黒幕（必要なら）も固定＆幅加算ゼロ */
.c-hamburger-menu__bg{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.35);
  opacity: 0;
  pointer-events: none;
  transition: opacity .25s ease;
}
.c-hamburger-menu__input:checked ~ .c-hamburger-menu__bg{
  opacity: 1;
  pointer-events: auto;
}

/* メニュー内の各項目が横に伸びてオーバーしない保険 */
.c-header__list,
.c-header__list-item,
.c-header__list-link,
.submenu{
  max-width: 100%;
  box-sizing: border-box;
  overflow-wrap: anywhere;
}

/* 画面内(0,0)に1pxで固定して完全不可視。横はみ出しにカウントされない */
.visually-hidden{
  position: absolute !important;
  left: 0 !important;
  top: 0 !important;
  width: 1px !important;
  height: 1px !important;
  margin: 0 !important;              /* ← -1px をやめる */
  padding: 0 !important;
  overflow: hidden !important;
  clip: rect(0 0 0 0) !important;
  clip-path: inset(50%) !important;
  border: 0 !important;
  white-space: nowrap !important;
}

/* ========== モバイル時：メニュー閉状態は DOM から外す ========== */
@media (max-width: 900px){
  /* 閉じている間は list / 黒幕ともに display:none */
  #hamburger:not(:checked) ~ .c-hamburger-menu__list { display: none !important; }
  #hamburger:not(:checked) ~ .c-hamburger-menu__bg   { display: none !important; }

  /* 開いたら block にして、右からスライドインのオフキャンバス */
  #hamburger:checked ~ .c-hamburger-menu__list { display: block !important; }

  .c-hamburger-menu__list{
    position: fixed;
    inset: 0 0 0 auto;                /* 画面右に張り付け */
    width: min(100svw, 340px);        /* ビューポート幅以内 */
    height: 100dvh;
    margin: 0;
    padding: 16px 20px;
    box-sizing: border-box;
    overflow-y: auto;
    background: #fff;

    transform: translateX(100%);      /* 閉じている間に備えた初期値 */
    transition: transform .25s ease;
    will-change: transform;

    /* 念のため横方向は切る */
    max-width: 100svw;
    overflow-x: hidden;
  }
  #hamburger:checked ~ .c-hamburger-menu__list{
    transform: translateX(0);
  }

  .c-hamburger-menu__bg{
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.35);
  }

  /* メニュー内テキストが横に伸びない保険 */
  .c-header__list,
  .c-header__list-item,
  .c-header__list-link,
  .submenu,
  .sub-caret{
    max-width: 100%;
    overflow-wrap: anywhere;
    white-space: normal;
    box-sizing: border-box;
  }
}

/* ========== デスクトップ時：通常ナビに戻す（オフキャンバス無効） ========== */
@media (min-width: 901px){
  .c-hamburger-menu__list{
    position: static !important;
    transform: none !important;
    height: auto !important;
    width: auto !important;
    display: flex !important;
    overflow: visible !important;
  }
  .c-hamburger-menu__bg{ display: none !important; }
}

/* ========== 視覚的に隠す要素は画面内 1px に固定（はみ出し検出で無視される） ========== */
.visually-hidden{
  position: absolute !important;
  left: 0 !important;
  top: 0 !important;
  width: 1px !important;
  height: 1px !important;
  margin: 0 !important;
  padding: 0 !important;
  overflow: hidden !important;
  clip: rect(0 0 0 0) !important;
  clip-path: inset(50%) !important;
  border: 0 !important;
  white-space: nowrap !important;
}

/* 全体保険（未設定なら） */
*, *::before, *::after { box-sizing: border-box; }
html, body { margin: 0; overflow-x: hidden; }


  </style>
  <!-- ▲ triad 完了 -->
</head>

<body>
<a id="top" class="visually-hidden">top</a>

<div id="page">
  <!-- 共通ヘッダー -->
  <header id="site-header" class="c-header c-hamburger-menu">
    <a href="index.html" class="c-header__logo"><img src="img/logo.webp" alt="ロゴ"></a>
    <input type="checkbox" id="hamburger" class="c-hamburger-menu__input"/>
    <label for="hamburger" class="c-hamburger-menu__bg"></label>

    <ul class="c-header__list c-hamburger-menu__list">
      <li class="c-header__list-item"><a href="index.html" class="c-header__list-link">TOP</a></li>

      <li class="c-header__list-item has-sub">
        <input type="checkbox" id="sub-company" class="sub-toggle">
        <a href="corp.html" class="c-header__list-link">法人概要</a>
        <label for="sub-company" class="sub-caret" aria-label="法人概要のメニューを開閉"></label>
        <ul class="submenu">
          <li><a href="purpose.html">設立趣旨</a></li>
          <li><a href="philosophy.html">ハンズの理念</a></li>
          <li><a href="history.html">ハンズのあゆみ</a></li>
          <li><a href="teikan.html">定款</a></li>
          <li><a href="officers.html">役員</a></li>
        </ul>
      </li>

      <li class="c-header__list-item has-sub is-current">
        <input type="checkbox" id="sub-offices" class="sub-toggle" checked>
        <a href="office.html" class="c-header__list-link">事業所紹介</a>
        <label for="sub-offices" class="sub-caret" aria-label="事業所紹介のメニューを開閉"></label>
        <ul class="submenu">
          <li><a href="wahaha.html">わぁははクラブ</a></li>
          <li><a href="residence.html" aria-current="page">居宅介護</a></li>
          <li><a href="soudan.html">相談支援</a></li>
          <li><a href="little.html">リトルハンズ</a></li>
          <li><a href="sakura.html">さくらなみき</a></li>
          <li><a href="myroot.html">マイルートリンク</a></li>
          <li><a href="ichisapo.html">若者サポートステーション</a></li>
          <li><a href="jobcafe.html">ジョブカフェ</a></li>
          <li><a href="citizen.html">市民活動センター</a></li>
        </ul>
      </li>

      <li class="c-header__list-item has-sub">
        <input type="checkbox" id="sub-howto" class="sub-toggle">
        <a href="howto.html" class="c-header__list-link">初めての方へ</a>
        <label for="sub-howto" class="sub-caret" aria-label="初めての方へのメニューを開閉"></label>
        <ul class="submenu">
          <li><a href="access.html">アクセス一覧</a></li>
          <li><a href="faq.html">FAQ</a></li>
        </ul>
      </li>

      <li class="c-header__list-item"><a href="contact.html" class="c-header__list-link">お問い合わせ</a></li>
    </ul>

    <label for="hamburger" class="c-hamburger-menu__button">
      <span class="c-hamburger-menu__button-mark"></span>
      <span class="c-hamburger-menu__button-mark"></span>
      <span class="c-hamburger-menu__button-mark"></span>
    </label>
  </header>

  <main id="main">
    <!-- ヒーロー -->
    <section class="hero hero--simple" aria-label="紹介">
      <div class="hero__inner">
        <h1 class="hero__title">
          よりそう<span class="em1">支援</span>、つながる<span class="em2">安心</span>。
        </h1>
      </div>
    </section>

    <!-- CTAスラブ -->
    <section class="cta-slab" aria-label="ご相談・お問い合わせ">
      <div class="cta-slab__inner">
        <a class="btn btn--finder" href="finder.html">あなたに合う支援をさがす</a>
      </div>
    </section>

    <!-- ▼ 三つの視点 -->
    <section class="triad-visual" aria-label="三つの視点">
      <div class="triad-visual__inner">
        <figure class="triad-visual__figure">
          <img src="img/circle2.webp"
               alt="障がい福祉・就労支援・地域づくりがつながる図"
               class="triad-visual__img"
               loading="lazy" decoding="async">
        </figure>

        <div class="triad-copy">
          <p class="triad-copy__kicker">ABOUT HANDS</p>
          <p class="triad-copy__lead">
            私たちレスパイトハウス・ハンズは、<br>
            <strong>障がい福祉・就労支援・地域づくり</strong>の三つの視点で、<br>
            子どもから大人までの暮らしに寄り添う、<br>
            このまちのNPO法人です。
          </p>
        </div>
      </div>
    </section>
    <!-- ▲ 三つの視点ここまで -->

    <!-- NEWS -->
    <section class="news" aria-labelledby="news-title">
      <div class="section__header">
        <h2 id="news-title">NEWS</h2>
        <a class="section__more" href="news.html">すべて見る</a>
      </div>

      <ul class="news__list">
        <li class="news__item">
          <a href="news3.html">
            <time datetime="2025-11-11" class="news__date">2025.11.11</time>
            <span class="news__tag">お知らせ</span>
            <span class="news__title">新施設完成／見学会のお知らせ</span>
          </a>
        </li>
        <li class="news__item">
          <a href="news2.html">
            <time datetime="2025-11-10" class="news__date">2025.11.10</time>
            <span class="news__tag">お知らせ</span>
            <span class="news__title">ホームページをリニューアルしました。</span>
          </a>
        </li>
        <li class="news__item">
          <a href="news1.html">
            <time datetime="2025-04-01" class="news__date">2025.04.01</time>
            <span class="news__tag">お知らせ</span>
            <span class="news__title">マイルートリンクがスタートしました。</span>
          </a>
        </li>
      </ul>
    </section>

    <nav class="cta-bar" aria-label="主要導線">
      <a class="cta" href="tel:0191-31-5720">
        <svg class="cta__icon" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M22 16.92v2a2 2 0 0 1-2.18 2 19.93 19.93 0 0 1-8.69-3.07 19.5 19.5 0 0 1-6-6A19.93 19.93 0 0 1 2.08 4.2 2 2 0 0 1 4.06 2h2a2 2 0 0 1 2 1.72c.12.86.32 1.7.6 2.5a2 2 0 0 1-.45 2.11l-1.27 1.27a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.8.28 1.64.48 2.5.6A2 2 0 0 1 22 16.92Z" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        電話で相談
      </a>

      <a class="cta" href="mailto:hands.guitar@ocn.ne.jp">
        <svg class="cta__icon" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M4 6h16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2Z" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/>
          <path d="M22 8 12 14 2 8" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        メールで問い合わせ
      </a>
    </nav>
  </main>

  <!-- 上へ戻る（スクロール進捗リング付き） -->
  <button id="backToTop" class="btt btt--ring" aria-label="ページの先頭へ" data-no-print>
    <span class="btt__ring" aria-hidden="true"></span>
    <span class="btt__inner" aria-hidden="true">
      <svg class="btt__icon" viewBox="0 0 24 24" focusable="false">
        <path d="M12 5l-6 6h4v7h4v-7h4z"/>
      </svg>
      <span class="btt__label">TOP</span>
    </span>
  </button>

  <!-- 共通フッター -->
  <footer class="site-footer" aria-labelledby="footer-title">
    <h2 id="footer-title" class="visually-hidden">フッター</h2>
    <div class="footer__inner">
      <section class="footer__brand">
        <a href="index.html" class="footer__logo">
          <img src="img/logo.webp" alt="レスパイトハウス ハンズ" height="48">
        </a>
        <address class="footer__addr">
          <p>特定非営利活動法人レスパイトハウス・ハンズ</p>
          〒021-0031　岩手県一関市青葉二丁目 ６-16<br>
          TEL：<a href="tel:0191-31-5720">0191-31-5720</a><br>
          FAX：0191-31-5721<br>
          MAIL：<a href="mailto:hands.guitar@ocn.ne.jp">hands.guitar@ocn.ne.jp</a>
        </address>
        <p class="footer__note">受付時間：平日 9:00–18:00（年末年始を除く）</p>
        <p class="footer__map"><a href="https://maps.google.com" target="_blank" rel="noopener">Googleマップで見る</a></p>
      </section>

      <nav class="footer__nav" aria-label="フッターナビゲーション">
        <div class="footer__group">
          <h3>法人概要</h3>
          <ul>
            <li><a href="philosophy.html">ハンズの理念</a></li>
            <li><a href="history.html">ハンズのあゆみ</a></li>
            <li><a href="teikan.html">定款</a></li>
            <li><a href="officers.html">役員</a></li>
          </ul>
        </div>
        <div class="footer__group">
          <h3>事業所紹介</h3>
          <ul>
            <li><a href="wahaha.html">わぁははクラブ</a></li>
            <li><a href="residence.html" aria-current="page">居宅介護</a></li>
            <li><a href="soudan.html">相談支援</a></li>
            <li><a href="little.html">リトルハンズ</a></li>
            <li><a href="sakura.html">さくらなみき</a></li>
            <li><a href="myroot.html">マイルートリンク</a></li>
            <li><a href="ichisapo.html">若者サポートステーション</a></li>
            <li><a href="jobcafe.html">ジョブカフェ</a></li>
            <li><a href="citizen.html">市民活動センター</a></li>
          </ul>
        </div>
        <div class="footer__group">
          <h3>外部リンク</h3>
          <ul>
            <li><a href="https://www.city.ichinoseki.iwate.jp/" target="_blank" rel="noopener">一関市HP</a></li>
            <li><a href="https://ichisapo.jp/" target="_blank" rel="noopener">いちのせき若者サポートステーション</a></li>
            <li><a href="http://jc-ichi.jp/" target="_blank" rel="noopener">ジョブカフェ一関</a></li>
            <li><a href="https://www.center-i.org/" target="_blank" rel="noopener">いちのせき市民活動センター</a></li>
          </ul>
        </div>
        <div class="footer__group">
          <h3>情報公開</h3>
          <ul>
            <li><a href="privacy.html">プライバシーポリシー</a></li>
            <li><a href="accessibility.html">アクセシビリティ方針</a></li>
            <li><a href="sitemap.html">サイトマップ</a></li>
          </ul>
        </div>
      </nav>
    </div>

    <div class="footer__bar">
      <small>© 2025 特定非営利活動法人レスパイトハウス・ハンズ</small>
      <a href="#top" class="footer__top" aria-label="ページの先頭へ">▲ TOP</a>
    </div>
  </footer>
</div><!-- /#page -->

<!-- スプラッシュ -->
<div id="splash" aria-hidden="true">
  <img src="img/logo.webp" alt="">
</div>

<script>
  window.addEventListener('load', function () {
    const hold   = 1700;
    const fadeMs = 700;
    const html   = document.documentElement;
    const splash = document.getElementById('splash');

    html.classList.add('no-scroll');

    setTimeout(() => {
      document.body.classList.add('page-show');
      html.classList.remove('no-scroll');
      html.style.overflowY = 'auto';
      splash.classList.add('splash-hide');
      setTimeout(() => { splash.style.display = 'none'; }, fadeMs + 50);
    }, hold);
  });
</script>

<script>
  (function(){
    const btn = document.getElementById('backToTop');
    if(!btn) return;

    const showAt = 200;
    const ring = btn.querySelector('.btt__ring');

    const update = () => {
      const scrollTop = window.scrollY || document.documentElement.scrollTop;
      const docH = document.documentElement.scrollHeight - window.innerHeight;
      const ratio = docH > 0 ? Math.min(scrollTop / docH, 1) : 0;
      const deg = Math.round(ratio * 360) + 'deg';
      ring && ring.style.setProperty('--btt-progress', deg);

      if (scrollTop > showAt) btn.classList.add('is-visible');
      else btn.classList.remove('is-visible');
    };

    btn.addEventListener('click', (e) => {
      e.preventDefault();
      const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      window.scrollTo({ top: 0, behavior: reduce ? 'auto' : 'smooth' });
    });

    window.addEventListener('scroll', update, { passive: true });
    window.addEventListener('resize', update);
    update();
  })();
</script>
</body>
</html>
